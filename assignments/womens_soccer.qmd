---
title: "Women's Soccer Data"
---

We'll use this notebook to explore some NCAA women's soccer data and [our questions](https://docs.google.com/spreadsheets/d/1G1AjH2iS6kj3kKHCRi0XVy5Lcm-rahJkeTAToVh9J1g/edit?gid=0#gid=0). First, let's load the tidyverse library:

```{r}
library(tidyverse)
```

We'll want to start with 2025 match data, which is located in [this GitHub repository](https://github.com/dwillis/NCAAWomensSoccerData). We can load the match data directly from GitHub using `read_csv`:


```{r}
matches_2025 <- read_csv("https://raw.githubusercontent.com/dwillis/NCAAWomensSoccerData/main/data/ncaa_womens_soccer_matchstats_2025.csv")
```

Let's take a look at this data to see what it contains, using `head` and `glimpse`:

```{r}
head(matches_2025)
glimpse(matches_2025)

big10 <- c("Nebraska Huskers", "Iowa Hawkeyes", "Minnesota Golden Gophers", "Illinois Fighting Illini", "Northwestern Wildcats", "Wisconsin Badgers", "Indiana Hoosiers", "Purdue Boilermakers", "Ohio St. Buckeyes", "Michigan Wolverines", "Michigan St. Spartans", "Penn St. Nittany Lions", "Rutgers Scarlet Knights", "Maryland Terrapins, Terps", "Southern California Trojans", "UCLA Bruins", "Washington Huskies", "Oregon Ducks")

big10_matches <- matches_2025 |> 
  filter(team %in% big10)
```
```{r}
matches_2025 |> 
  summarise(
    mean_diff = mean(diff),
    mean_opp_goals = mean(defensive_goals),
    mean_sog = mean(so_g),
    mean_opp_sog = mean(defensive_so_g)
    )
```

Now, onto the questions using aggregates, which means `group_by` and `summarize`:

1. How many shots in total has Maryland attempted and how many have been on goal? Calculate a percentage of shots on goal.

```{r}

```

2. What about the same shot stats from last season's first four games? You'll need to load the matches from 2024 - just change the season in the URL - and filter by date to find the first four games.

```{r}

```


3. Maryland started 2022 with 4 draws. Have any other teams had as many this season?

```{r}

```


4. How many total corner kicks has Maryland had so far this season and how many have its opponents have? Calculate the difference between the two totals for every team using group_by, summarize and mutate, then filter to find Maryland's totals.

```{r}


```

5. What's the most interesting thing you've seen from these questions?



### Signifigance Tets 
```{r}
matches_2024 <- read_csv("https://raw.githubusercontent.com/dwillis/NCAAWomensSoccerData/main/data/ncaa_womens_soccer_matchstats_2024.csv") |> mutate(diff = team_score - opponent_score, total_goals = goals + defensive_goals) |> 
filter(date < '2024-09-18')


matches_2025 <- read_csv("https://raw.githubusercontent.com/dwillis/NCAAWomensSoccerData/main/data/ncaa_womens_soccer_matchstats_2025.csv") |> mutate(diff = team_score - opponent_score, total_goals = goals + defensive_goals)


```

t-test 

```{r}
t.test(matches_2024$total_goals, matches_2025$total_goals)
```



## Correlations & Regression 

```{r}
correlations <- read_csv("https://raw.githubusercontent.com/dwillis/NCAAWomensSoccerData/main/data/ncaa_womens_soccer_matchstats_2024.csv")



newcorrelations <- correlations |> 
  mutate(
    differential = goals - defensive_goals
    )


newcorrelations |> summarise(correlation = cor(differential, fouls, method="pearson"))
```


```{r}
newcorrelations |> summarise(correlation = cor(differential, yellow_cards, method="pearson"))
```

```{r}
fit <- lm(differential ~ fouls, data = newcorrelations)
summary(fit)
```

```{r}
newcorrelations |> 
  summarise(correlation = cor(differential, so_g, method="pearson"))


net <- lm(differential ~ so_g, data = newcorrelations)
summary(net)
```

### 2025 Version

```{r}
correlations <- read_csv("https://raw.githubusercontent.com/dwillis/NCAAWomensSoccerData/main/data/ncaa_womens_soccer_matchstats_2025.csv")

terps25<- correlations |> 
  filter (team == "Maryland Terrapins, Terps")

newcorrelations <- correlations |> 
  mutate(
    differential = goals - defensive_goals
    )
```
```{r}
newcorrelations |> summarise(correlation = cor(differential, sh_att, method="pearson"))

net <- lm(differential ~ sh_att, data = newcorrelations)
summary(net)

```
```{r}
newcorrelations |> summarise(correlation = cor(differential, points, method="pearson"))

```
```{r}
net <- lm(differential ~ points, data = newcorrelations)
summary(net)
```

```{r}
newcorrelations |> summarise(correlation = cor(differential, defensive_so_g, method="pearson"))



net <- lm(differential ~ defensive_so_g, data = newcorrelations)
summary(net)
```



```{r}
correlations <- read_csv("https://raw.githubusercontent.com/dwillis/NCAAWomensSoccerData/main/data/ncaa_womens_soccer_matchstats_2025.csv")



newcorrelations <- correlations |> 
  mutate(
    differential = goals - defensive_goals
    )

terps25<- newcorrelations |> 
  filter (team == "Maryland Terrapins, Terps")
```
```{r}

terps25 |> summarise(correlation = cor(differential, defensive_so_g, method="pearson"))



```

```{r}
terps25 |> summarise(correlation = cor(differential, so_g, method="pearson"))
```
```{r}
terps25 |> summarise(correlation = cor(differential, sh_att, method="pearson"))

net <- lm(differential ~ sh_att, data = terps25)
summary(net)

```

```{r}
terps25 |> summarise(correlation = cor(differential, defensive_so_g, method="pearson"))

net <- lm(differential ~ defensive_so_g, data = terps25)
summary(net)
```

```{r}
terps25 |> summarise(correlation = cor(differential, defensive_fouls, method="pearson"))
```



## Story Pitch 

In the 2025 season, Maryland soccer has had to make or break the chances they create. When the Terps push forward and generate consistent shots, they tend to control matches and put themselves in positions to win. But when the offense stalls, so does the teams momentum.Their defensive stability plays a critical role. The team allowed a high number of opponent shots on goal and paid for it in the final score. In games where Maryland limits opponent opportunities looks drastically different from where breakdowns at the back allow the other teams to dictate play. The model results show that matches where the Terrapins generated a lot of shots on target were the clearest indicators of dominant results. In matches where the opposing team registered many shots on goal, Maryland tended to struggle defensively and the goal differential moved in the opponentâ€™s favor.